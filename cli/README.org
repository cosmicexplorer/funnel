#+TITLE: cli
#+STARTUP: showall

* Goals
** TODO [0/3] pants plugins with extensible options
- [ ] make a pants plugin that can transmit options from pants's options.
- [ ] see discussion in [[https://github.com/pantsbuild/pants/issues/10885][#10885]]!
- [ ] see use case in [[https://github.com/pantsbuild/pants/blob/efef4c54d36e50ee2e14ad476ede8f3891dfa3f5/src/python/pants/core/util\_rules/subprocess\_environment.py\#L33-L35][the pants ~SuprocessEnvironment~/]]!

** CoffeeScript

Read *all* of the comments in [[https://github.com/jashkenas/coffeescript/pull/3946][the CoffeeScript v2 args parsing PR (jashkenas/coffeescript\#3946)]] to understand some of the complexity of fixing platform-specific shebang/CLI incompatibilities while not breaking previous shebangs/scripts -- it's exh(ilarat|aust)i(ng|ve)}`!

** Previous "Playing Around" with xml}
See [[file:cli.xml][cli.xml]] for a really well-thought-out example.

* Proposal for Spec

#+BEGIN_SRC sh

xmlstarlet-subcommands = (\n
  ed    (or edit)      - Edit/Update XML document(s)
  sel   (or select)    - Select data or query XML document(s) (XPATH, etc)
  tr    (or transform) - Transform XML document(s) using XSLT
  val   (or validate)  - Validate XML document(s) (well-formed/DTD/XSD/RelaxNG)
  fo    (or format)    - Format XML document(s)
  el    (or elements)  - Display element structure of XML document
  c14n  (or canonic)   - XML canonicalization
  ls    (or list)      - List directory as XML
  esc   (or escape)    - Escape special XML characters
  unesc (or unescape)  - Unescape special XML characters
  pyx   (or xmln)      - Convert XML into PYX format (based on ESIS - ISO 8879)
  p2x   (or depyx)     - Convert PYX into XML
)
# NB: converting one format into anothher (XML <=> JSON) IS AN EFFECT!

# NB: -q means no error output is written -- THIS IS AN EFFECT!
xmlstarlet-global-options = (\n
  -q or --quiet        - no error output
  --doc-namespace      - extract namespace bindings from input doc (default)
  --no-doc-namespace   - don't extract namespace bindings from input doc
  --version            - show version
  --help               - show help
)
,

# NB: all options are <<<pants-like>>>!!!
xmlstarlet = [xmlstarlet-global-options] subcommand [subcommand-options]

#+END_SRC
